# 工作空间管理配置
# 统一管理所有智能体的工作空间和文件组织

## 工作空间架构

### 1. 目录结构设计
```yaml
workspace_architecture:
  root_directory: \"./stock_analysis_workspace\"
  
  # 核心目录结构
  core_structure:
    data_input:
      path: \"data_input\"
      description: \"用户上传的数据文件\"
      supported_formats: [\"csv\", \"xlsx\", \"json\", \"txt\"]\n      auto_processing: true\n      \n    raw_data:\n      path: \"data/raw_data\"\n      description: \"从API获取的原始数据\"\n      subdirectories:\n        financial_statements: \"财报数据\"\n        market_data: \"市场数据\"\n        company_info: \"公司基本信息\"\n        historical_data: \"历史数据\"\n        \n    processed_data:\n      path: \"data/processed_data\"\n      description: \"处理后的结构化数据\"\n      subdirectories:\n        analysis_ready: \"可直接分析的数据\"\n        standardized: \"标准化格式数据\"\n        validated: \"验证通过的 数据\"\n        \n    analysis_results:\n      path: \"data/analysis_results\"\n      description: \"分析结果数据\"\n      subdirectories:\n        ratio_analysis: \"比率分析结果\"\n        trend_analysis: \"趋势分析结果\"\n        health_assessment: \"健康评估结果\"\n        valuation: \"估值分析结果\"\n        \n    charts:\n      path: \"charts\"\n      description: \"生成的图表文件\"\n      subdirectories:\n        basic_charts:\n          line_charts: \"折线图\"\n          bar_charts: \"柱状图\"\n          pie_charts: \"饼图\"\n        advanced_charts:\n          radar_charts: \"雷达图\"\n          scatter_plots: \"散点图\"\n          heatmaps: \"热力图\"\n          area_charts: \"面积图\"\n        custom_charts: \"自定义图表\"\n        \n    reports:\n      path: \"reports\"\n      description: \"生成的报告文件\"\n      subdirectories:\n        by_format:\n          markdown: \"MD格式报告\"\n          html: \"HTML格式报告\"\n          pdf: \"PDF格式报告\"\n        by_type:\n          single_company: \"单公司分析报告\"\n          comparison: \"对比分析报告\"\n          industry: \"行业分析报告\"\n        by_date:\n          daily: \"按日期分组\"\n          weekly: \"按周分组\"\n          monthly: \"按月分组\"\n          \n    logs:\n      path: \"logs\"\n      description: \"日志文件管理\"\n      subdirectories:\n        agent_execution:\n          data_agent: \"数据获取日志\"\n          data_analysis: \"数据分析日志\"\n          financial_analysis: \"财务分析日志\"\n          chart_generator: \"图表生成日志\"\n          report_agent: \"报告生成日志\"\n        system_logs:\n          error_logs: \"错误日志\"\n          performance_logs: \"性能日志\"\n          audit_logs: \"审计日志\"\n          \n    cache:\n      path: \"cache\"\n      description: \"缓存文件管理\"\n      subdirectories:\n        api_cache: \"API调用缓存\"\n        analysis_cache: \"分析结果缓存\"\n        chart_cache: \"图表缓存\"\n        template_cache: \"模板缓存\"\n        \n    temp:\n      path: \"temp\"\n      description: \"临时文件存储\"\n      subdirectories:\n        processing: \"处理中的文件\"\n        uploads: \"上传临时文件\"\n        exports: \"导出临时文件\"\n      cleanup_policy: \"session_end\"\n      \n    config:\n      path: \"config\"\n      description: \"配置文件存储\"\n      subdirectories:\n        agent_configs: \"智能体配置\"\n        user_preferences: \"用户偏好设置\"\n        templates: \"模板文件\"\n        custom_settings: \"自定义设置\"\n```\n\n### 2. 文件命名规范\n```yaml\nfile_naming_conventions:\n  # 基本命名规则\n  base_rules:\n    date_format: \"%Y%m%d_%H%M%S\"\n    include_timestamp: true\n    separator: \"_\"\n    max_filename_length: 100\n    case_sensitive: false\n    forbidden_characters: [\"<\", \">\", \":\", \"\\\"\", \"|\", \"?\", \"*\"]\n    \n  # 特定文件类型命名模式\n  naming_patterns:\n    # 数据文件\n    raw_data_file: \"{company_name}_{stock_code}_{data_type}_{date}.{ext}\"\n    processed_data: \"{company_name}_{analysis_type}_processed_{date}.{ext}\"\n    analysis_results: \"{company_name}_{analysis_type}_results_{date}.{ext}\"\n    \n    # 图表文件\n    chart_file: \"{company_name}_{chart_title}_{chart_type}_{date}.{ext}\"\n    comparison_chart: \"{companies}_comparison_{metric}_{date}.{ext}\"\n    trend_chart: \"{company_name}_{metric}_trend_{period}_{date}.{ext}\"\n    \n    # 报告文件\n    single_company_report: \"{company_name}_财务分析报告_{date}.{ext}\"\n    comparison_report: \"{companies}_对比分析报告_{date}.{ext}\"\n    industry_report: \"{industry}_行业分析报告_{date}.{ext}\"\n    \n    # 日志文件\n    agent_log: \"{agent_name}_{date}_{session_id}.log\"\n    error_log: \"error_{date}_{error_type}.log\"\n    performance_log: \"performance_{date}.log\"\n    \n  # 版本控制命名\n  version_naming:\n    pattern: \"{base_name}_v{version_number}\"\n    version_number_format: \"3_digits\"\n    max_versions: 5\n    auto_versioning: true\n```\n\n### 3. 文件组织策略\n```yaml\nfile_organization_strategies:\n  # 多维度组织\n  organizational_dimensions:\n    temporal:\n      by_year: true\n      by_month: true\n      by_day: false\n      archive_structure: \"year/month\"\n      \n    categorical:\n      by_company: true\n      by_industry: true\n      by_analysis_type: true\n      by_report_type: true\n      \n    functional:\n      by_agent: false\n      by_tool: false\n      by_status: true\n      by_priority: false\n      \n  # 智能分类规则\n  auto_classification:\n    content_based:\n      enabled: true\n      classification_rules:\n        - \"financial_statements → data/raw_data/financial_statements\"\n        - \"chart_files → charts/ (by type)\"\n        - \"analysis_reports → reports/ (by format and type)\"\n        - \"error_logs → logs/error_logs\"\n        \n    metadata_based:\n      enabled: true\n      extract_metadata: true\n      auto_tagging: true\n      smart_search: true\n      \n  # 文件关联管理\n  file_relationships:\n    track_relationships: true\n    auto_linking:\n      - \"报告链接到相关图表\"\n      - \"分析结果链接到原始数据\"\n      - \"图表链接到分析结果\"\n      - \"日志链接到对应的任务\"\n    dependency_tracking: true\n```\n\n### 4. 存储管理策略\n```yaml\nstorage_management:\n  # 容量管理\n  capacity_management:\n    total_quota: \"10GB\"\n    quotas_by_type:\n      data: \"40%\"\n      charts: \"25%\"\n      reports: \"20%\"\n      logs: \"10%\"\n      cache: \"5%\"\n      \n    monitoring:\n      check_frequency: \"hourly\"\n      alert_threshold: \"85%\"\n      cleanup_trigger: \"95%\"\n      \n  # 生命周期管理\n  lifecycle_management:\n    data_retention:\n      raw_data: \"90 days\"\n      processed_data: \"180 days\"\n      analysis_results: \"365 days\"\n      charts: \"180 days\"\n      reports: \"730 days\"\n      logs: \"90 days\"\n      cache: \"7 days\"\n      \n    archival_policies:\n      archive_old_data: true\n      archive_trigger: \"retention_period\"\n      archive_location: \"../archive\"\n      compression: true\n      encryption: false\n      \n  # 清理策略\n  cleanup_strategies:\n    automated_cleanup:\n      enabled: true\n      schedule: \"daily\"\n      cleanup_order:\n        1: \"temp_files\"\n        2: \"cache_files\"\n        3: \"old_logs\"\n        4: \"duplicate_files\"\n        5: \"large_temp_files\"\n        \n    smart_cleanup:\n      based_on_usage: true\n      keep_frequently_used: true\n      intelligent_selection: true\n      user_preference_learning: true\n      \n    duplicate_detection:\n      enabled: true\n      detection_method: \"content_hash\"\n      auto_cleanup: true\n      keep_strategy: \"newest_or_most_used\"\n```\n\n### 5. 性能优化策略\n```yaml\nperformance_optimization:\n  # 访问优化\n  access_optimization:\n    indexing:\n      enabled: true\n      indexed_attributes: [\"company_name\", \"date\", \"file_type\", \"analysis_type\"]\n      rebuild_frequency: \"weekly\"\n      \n    caching:\n      file_metadata_cache: true\n      search_index_cache: true\n      thumbnail_cache: true\n      cache_size: \"500MB\"\n      \n    prefetching:\n      related_files_prefetch: true\n      pattern_based_prefetch: true\n      user_behavior_learning: true\n      \n  # 并发处理\n  concurrent_processing:\n    file_operations:\n      parallel_read: true\n      parallel_write: false\n      max_concurrent_operations: 4\n      \n    agent_operations:\n      concurrent_agents: false  # 避免资源冲突\n      queue_management: true\n      priority_handling: true\n      \n  # 资源监控\n  resource_monitoring:\n    disk_usage: true\n    memory_usage: true\n    file_handles: true\n    network_io: false\n    \n    alerts:\n      high_disk_usage: \"90%\"\n      high_memory_usage: \"80%\"\n      too_many_files: \"10000_per_directory\"\n      slow_operations: \"5_seconds\"\n```\n\n### 6. 安全和隐私\n```yaml\nsecurity_privacy:\n  # 访问控制\n  access_control:\n    file_permissions: \"user_read_write\"\n    directory_permissions: \"user_full_control\"\n    sensitive_data_protection: true\n    \n  # 数据加密\n  encryption:\n    data_at_rest: false\n    data_in_transit: false\n    key_management: \"system_generated\"\n    \n  # 隐私保护\n  privacy_protection:\n    anonymization: false\n    personal_data_detection: false\n    data_retention_compliance: true\n    \n  # 审计跟踪\n  audit_trail:\n    file_access_logging: false\n    modification_tracking: true\n    deletion_tracking: true\n    user_action_logging: false\n```\n\n### 7. 监控和报告\n```yaml\nmonitoring_reporting:\n  # 使用统计\n  usage_statistics:\n    track_file_operations: true\n    track_storage_usage: true\n    track_agent_activity: true\n    track_user_behavior: true\n    \n  # 健康检查\n  health_checks:\n    disk_space_check: true\n    file_system_integrity: true\n    permission_check: true\n    backup_status: true\n    \n  # 报告生成\n  reporting:\n    usage_reports:\n      frequency: \"weekly\"\n      include_charts: true\n      include_recommendations: true\n      \n    storage_reports:\n      frequency: \"monthly\"\n      include_trends: true\n      include_projections: true\n      \n    performance_reports:\n      frequency: \"monthly\"\n      include_bottlenecks: true\n      include_optimization_suggestions: true\n```\n\n## 实施指南\n\n### 1. 初始化设置\n```yaml\ninitialization:\n  auto_create_directories: true\n  apply_default_permissions: true\n  create_sample_files: false\n  run_health_check: true\n  \nsetup_validation:\n  directory_structure_check: true\n  permission_check: true\n  space_availability_check: true\n  dependency_check: true\n```\n\n### 2. 维护任务\n```yaml\nmaintenance_tasks:\n  daily_tasks:\n    - \"cleanup_temp_files\"\n    - \"rotate_log_files\"\n    - \"update_file_indexes\"\n    \n  weekly_tasks:\n    - \"duplicate_file_cleanup\"\n    - \"cache_management\"\n    - \"usage_statistics_update\"\n    \n  monthly_tasks:\n    - \"archive_old_files\"\n    - \"storage_analysis\"\n    - \"performance_optimization\"\n    \n  quarterly_tasks:\n    - \"workspace_optimization\"\n    - \"policy_review\"\n    - \"capacity_planning\"\n```\n\n这套工作空间管理配置确保了文件组织的一致性、存储效率和维护便利性。